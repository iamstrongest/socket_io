import{u as g,f as $,o as i,c,a as s,d as h,e as r,F as k,r as w,t as p,h as v,b as y,R as x}from"./index-DCXIXEj8.js";import{u as m,c as I}from"./user-giQHEvsq.js";import{u as L}from"./chat-DygNyFXo.js";import{_ as f}from"./_plugin-vue_export-helper-DlAUqK2U.js";const R={class:"chatList-container"},S=["onClick"],V=["src"],b={class:"right-info"},A=["title"],B=["title"],j={__name:"Room",setup(C){const d=g(),l=m(),o=L();$(async()=>{const a={id:l.user.info.id};await o.getRoomDataList(a)});function n(a,e,t,_){let u=I[a].path;t&&(u=`${u}/${t}?receiveId=${_}&timestamp=${Date.now()}`),o.updateChatActive(e),o.updateActiveRoomId(t),d.push(u)}return(a,e)=>(i(),c("div",R,[e[2]||(e[2]=s("h3",null,"聊天记录",-1)),s("div",{class:h(["new-friends hover",{active:r(o).chatActive==-1}]),onClick:e[0]||(e[0]=t=>n(-1,-1))},e[1]||(e[1]=[s("i",null,[s("svg",{class:"icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-xindehaoyou"})])],-1),s("strong",null,"新的好友",-1)]),2),(i(!0),c(k,null,w(r(o).roomList,t=>(i(),c("div",{class:h(["room-list hover",{active:r(o).chatActive==t.roomId}]),key:t.id,onClick:_=>n(t.type,t.roomId,t.roomId,t.showUserId)},[s("div",null,[s("img",{src:t.avatar,alt:"用户头像",title:"用户头像"},null,8,V)]),s("div",b,[s("strong",{title:t.username},p(t.username),9,A),s("span",{title:t.lastChat},p(t.conment),9,B)])],10,S))),128))]))}},D=f(j,[["__scopeId","data-v-574c7ffd"]]),N={key:0,class:"chat-container"},F={class:"chat-container-right"},U={__name:"ChatView",setup(C){const d=m();return(l,o)=>{var n,a,e;return(e=(a=(n=r(d))==null?void 0:n.user)==null?void 0:a.info)!=null&&e.id?(i(),c("div",N,[v(D),s("div",F,[v(r(x))])])):y("",!0)}}},G=f(U,[["__scopeId","data-v-07e3d60b"]]);export{G as default};
