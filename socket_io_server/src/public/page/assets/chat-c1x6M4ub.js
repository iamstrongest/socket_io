import{E as w,r as c}from"./index-B0xKhKPY.js";import{a as m}from"./_plugin-vue_export-helper-C33wAQXg.js";import{k as C}from"./group_chat-BSKifq6B.js";function D(o){return m({url:"/room",method:"get",params:o})}function I(o){return m({url:"/chat",method:"get",params:o})}const S=w("chat",()=>{const o=c(-1),u=c(),e=c([]),n=c([]);function f(t){o.value=t}async function d(t){const{data:a}=await D(t),{data:r}=a;e.value=[...e.value,...r],e.value.sort((s,i)=>new Date(i.createdAt).getTime()-new Date(s.createdAt).getTime())}async function h(t){const{data:a}=await C(t),{data:r}=a;e.value=[...e.value,...r],e.value.sort((s,i)=>new Date(i.createdAt).getTime()-new Date(s.createdAt).getTime())}function l(t){e.value.forEach(a=>{a.roomId===t.roomId&&(a.conment=t.conment,a.createdAt=t.createdAt)}),e.value.sort((a,r)=>new Date(r.createdAt).getTime()-new Date(a.createdAt).getTime())}function v(t){u.value=t}function g(t){if(t instanceof Array){n.value.push(...t);return}n.value.push(t)}function A(t){if(t instanceof Array){n.value.unshift(...t);return}n.value.push(t)}function p(){e.value.length=0}function L(){n.value.length=0}return{chatActive:o,roomList:e,activeRoomId:u,chatList:n,updateActiveRoomId:v,getSingleRoomDataList:d,getGroupRoomLastChatDataList:h,updateChatActive:f,updateRoomList:l,addAfterChat:g,addBeforeChat:A,resetRoomList:p,resetChatList:L}});export{I as g,S as u};
