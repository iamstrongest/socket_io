import{s as v,q as b,h as x,u as I,o as d,c as m,a as o,v as y,x as i,y as c,z as F,e as V,j as h,f as k}from"./index-Bvb5MIaB.js";import{u,b as w,s as A}from"./user-CvFiV99N.js";import{_ as l}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N={class:"form_container"},S={class:"form_col"},B={for:"text"},D={class:"form_col"},M={for:"password"},U=["placeholder"],$={__name:"AddFriend",setup(p){const s=u(),a=v(()=>s.user.info.username),t=b({receiveId:"",conment:""});x(()=>{t.conment=`您好，我是${s.user.info.username},想要添加你成为好友`});const _=I(),f=async()=>{try{const r={sendId:s.user.info.id,receiveId:Number(t.receiveId),conment:t.conment,status:0,username:a.value},e={sendId:s.user.info.id,receiveId:Number(t.receiveId),conment:t.conment,type:2},{data:n}=await w(r);t.id="",t.conment="",n.code===200&&(alert(n.message),A.emit("send_notify",e),_.push("/chat/request"))}catch(r){console.error("登录失败:",r)}};return(r,e)=>(d(),m("div",N,[o("form",{onSubmit:F(f,["prevent"])},[o("div",S,[o("label",B,[e[2]||(e[2]=o("span",null,"用户ID: ",-1)),e[3]||(e[3]=y()),i(o("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=n=>t.receiveId=n),name:"text",id:"text",placeholder:"输入用户ID"},null,512),[[c,t.receiveId]])])]),o("div",D,[o("label",M,[e[4]||(e[4]=o("div",null,"附带信息: ",-1)),i(o("textarea",{type:"text",placeholder:t.conment,"onUpdate:modelValue":e[1]||(e[1]=n=>t.conment=n)},null,8,U),[[c,t.conment]])])]),e[5]||(e[5]=o("div",{class:"form_col submit"},[o("label",{for:"submit"},[o("button",{type:"submit",name:"submit"},"提交")])],-1))],32)]))}},q=l($,[["__scopeId","data-v-6ed6747b"]]),T={class:"add-friend-container"},g={__name:"AddFriendView",setup(p){const s=u();return(a,t)=>(d(),m("div",T,[V(s).user.info.id?(d(),h(q,{key:0})):k("",!0)]))}},E=l(g,[["__scopeId","data-v-7b4ea6c7"]]);export{E as default};
