import{a as g,u as y,s as I}from"./user-DiX8ICKB.js";import{_ as k}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{o as a,c as r,a as s,b as d,t as _,F as l,i as b,g as q,r as C,j as f}from"./index-BthrF4y-.js";import{N}from"./NoData-C6Eo53wy.js";function S(i){return g({url:"/request",method:"get",params:i})}function x(i){return g({url:"/request",method:"post",data:i})}const F={class:"request-card-container"},L={key:0,class:"avatar"},R=["src"],T={class:"info"},w=["title"],E=["title"],$={class:"state"},B={key:0,class:"wait-container"},V={key:1,class:"btns"},j={class:"common"},D={__name:"RequestCard",props:{avatar:{default:null,type:String||null},id:Number||String,conment:String,username:String,status:Number,userType:Number,sendId:Number,receiveId:Number},emits:["handleClickEmit"],setup(i,{emit:c}){y();const t=i,m=c;async function o(n,e,u){const v={status:n,id:e,receiveId:t.receiveId,sendId:t.sendId};u&&(v.conment=u);const{data:p}=await x(v);p.code===200&&(alert(p.message),m("handleClickEmit",v));const h={type:3,status:n,receiveId:t.receiveId,sendId:t.sendId};I.emit("send_notify",h)}return(n,e)=>(a(),r("div",F,[t.avatar?(a(),r("div",L,[s("img",{src:t.avatar,alt:"申请者照片"},null,8,R)])):d("",!0),s("div",T,[s("h3",{title:t.username},_(t.username),9,w),s("p",{class:"conment",title:t.conment},_(t.conment),9,E)]),s("div",$,[t.status==0?(a(),r(l,{key:0},[t.userType==1?(a(),r("div",B,e[2]||(e[2]=[s("div",{class:"font_icon"},[s("svg",{class:"icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-dengdai"})])],-1),s("strong",{class:"grey"},"待验证",-1)]))):d("",!0),t.userType==2?(a(),r("div",V,[s("button",{class:"button reject",type:"button",title:"拒绝",onClick:e[0]||(e[0]=u=>o(1,t.id))},"拒绝"),s("button",{class:"button",type:"button",title:"同意",onClick:e[1]||(e[1]=u=>o(2,t.id,t.conment))},"同意")])):d("",!0)],64)):d("",!0),s("div",j,[t.status==1?(a(),r(l,{key:0},[e[3]||(e[3]=s("div",{class:"font_icon"},[s("svg",{class:"icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-shibai"})])],-1)),e[4]||(e[4]=s("strong",{class:"reject"},"已拒绝",-1))],64)):d("",!0),t.status==2?(a(),r(l,{key:1},[e[5]||(e[5]=s("div",{class:"font_icon"},[s("svg",{class:"icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-chenggong"})])],-1)),e[6]||(e[6]=s("strong",{class:"agree"},"已同意",-1))],64)):d("",!0)])])]))}},H=k(D,[["__scopeId","data-v-658dddcc"]]),M={class:"container"},P={key:0,class:"datalist"},U={__name:"FriendRequestListView",setup(i){const c=y(),t=b([]);q(async()=>{const o={id:c.user.info.id},{data:n}=await S(o),{data:e}=n;n.code===200&&(t.value=e)});function m(o){t.value.forEach(n=>{n.id==o.id&&(n.status=o.status)})}return(o,n)=>(a(),r("div",M,[n[0]||(n[0]=s("p",null,"好友申请列表列表",-1)),t.value.length>0?(a(),r("div",P,[(a(!0),r(l,null,C(t.value,e=>(a(),f(H,{key:e.id,id:e.id,conment:e.conment,receiveId:e.receiveId,sendId:e.sendId,userType:e.userType,avatar:e.avatar,username:e.username,status:e.status,onHandleClickEmit:m},null,8,["id","conment","receiveId","sendId","userType","avatar","username","status"]))),128))])):(a(),f(N,{key:1,class:"no-data"}))]))}},K=k(U,[["__scopeId","data-v-7119a4e9"]]);export{K as default};
