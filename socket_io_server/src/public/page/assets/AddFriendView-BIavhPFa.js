import{s as f,q as v,h as b,u as x,o as a,c as m,a as o,v as I,x as i,y as c,z as y,e as V,j as h,f as k}from"./index-BJBM8RCy.js";import{u,b as w,s as F}from"./user-SyG9M8Is.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";const S={class:"form_container"},A={class:"form_col"},B={for:"text"},D={class:"form_col"},M={for:"password"},U=["placeholder"],$={__name:"AddFriend",setup(l){const s=u(),d=f(()=>s.user.info.username),t=v({receiveId:"",conment:""});b(()=>{t.conment=`您好，我是${s.user.info.username},想要添加你成为好友`});const p=x(),_=async()=>{try{const r={sendId:s.user.info.id,receiveId:Number(t.receiveId),conment:t.conment,status:0,username:d.value},e={sendId:s.user.info.id,receiveId:Number(t.receiveId),conment:t.conment,type:2},{data:n}=await w(r);t.id="",t.conment="",n.code===200&&(alert(n.message),F.emit("send_notify",e),p.push("/chat/request"))}catch(r){console.error("登录失败:",r)}};return(r,e)=>(a(),m("div",S,[o("form",{onSubmit:y(_,["prevent"])},[o("div",A,[o("label",B,[e[2]||(e[2]=o("span",null,"用户ID: ",-1)),e[3]||(e[3]=I()),i(o("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=n=>t.receiveId=n),name:"text",id:"text",placeholder:"输入用户ID"},null,512),[[c,t.receiveId]])])]),o("div",D,[o("label",M,[e[4]||(e[4]=o("div",null,"附带信息: ",-1)),i(o("textarea",{type:"text",placeholder:t.conment,"onUpdate:modelValue":e[1]||(e[1]=n=>t.conment=n)},null,8,U),[[c,t.conment]])])]),e[5]||(e[5]=o("div",{class:"form_col submit"},[o("label",{for:"submit"},[o("button",{type:"submit",name:"submit"},"提交")])],-1))],32)]))}},q={class:"add-friend-container"},T={__name:"AddFriendView",setup(l){const s=u();return(d,t)=>(a(),m("div",q,[V(s).user.info.id?(a(),h($,{key:0})):k("",!0)]))}},C=N(T,[["__scopeId","data-v-7b4ea6c7"]]);export{C as default};
