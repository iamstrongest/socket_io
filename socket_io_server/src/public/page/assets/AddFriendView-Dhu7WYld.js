import{v as f,s as v,g as b,u as x,o as a,c as m,a as o,x as I,y as i,z as c,A as y,e as V,j as k,b as w}from"./index-BthrF4y-.js";import{u,b as F,s as h}from"./user-DiX8ICKB.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N={class:"form_container"},S={class:"form_col"},B={for:"text"},D={class:"form_col"},M={for:"password"},U=["placeholder"],$={__name:"AddFriend",setup(l){const s=u(),d=f(()=>s.user.info.username),t=v({receiveId:"",conment:""});b(()=>{t.conment=`您好，我是${s.user.info.username},想要添加你成为好友`});const p=x(),_=async()=>{try{const r={sendId:s.user.info.id,receiveId:Number(t.receiveId),conment:t.conment,status:0,username:d.value},e={sendId:s.user.info.id,receiveId:Number(t.receiveId),conment:t.conment,type:2},{data:n}=await F(r);t.id="",t.conment="",h.emit("send_notify",e),n.code===200&&(alert(n.message),p.push("/chat/request"))}catch(r){console.error("登录失败:",r)}};return(r,e)=>(a(),m("div",N,[o("form",{onSubmit:y(_,["prevent"])},[o("div",S,[o("label",B,[e[2]||(e[2]=o("span",null,"用户ID: ",-1)),e[3]||(e[3]=I()),i(o("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=n=>t.receiveId=n),name:"text",id:"text",placeholder:"输入用户ID"},null,512),[[c,t.receiveId]])])]),o("div",D,[o("label",M,[e[4]||(e[4]=o("div",null,"附带信息: ",-1)),i(o("textarea",{type:"text",placeholder:t.conment,"onUpdate:modelValue":e[1]||(e[1]=n=>t.conment=n)},null,8,U),[[c,t.conment]])])]),e[5]||(e[5]=o("div",{class:"form_col submit"},[o("label",{for:"submit"},[o("button",{type:"submit",name:"submit"},"提交")])],-1))],32)]))}},g={class:"add-friend-container"},T={__name:"AddFriendView",setup(l){const s=u();return(d,t)=>(a(),m("div",g,[V(s).user.info.id?(a(),k($,{key:0})):w("",!0)]))}},C=A(T,[["__scopeId","data-v-7b4ea6c7"]]);export{C as default};
